## 技术实现策略分析

### 1. 前端实现策略
- 在资料管理界面添加"批量新增"按钮
- 创建批量导入对话框，包含：
  - JSON数据输入框
  - 开始导入按钮
  - 取消按钮
  - 进度条窗口

### 2. 后端实现策略
- 创建新的API端点 `/api/v1/artifacts/batch` 处理批量导入
- 实现JSON数据验证和解析功能
- 重用现有的资料创建逻辑，包括向量同步
- 实现进度跟踪机制

### 3. 解耦设计策略
- 将批量导入功能独立为专门的服务类
- 重用现有的资料创建和向量同步逻辑
- 使用异步任务处理大批量数据

现在让我继续分析：


        
            
toolName: todo_write
            
status: success
          
Todos updated: 4 items
          
## 解耦的批量导入系统架构设计

### 1. 整体架构设计
- **前端**: 资料管理页面新增"批量新增"按钮，打开专用对话框
- **后端**: 新增批量导入服务类，处理JSON解析、验证、导入流程
- **API层**: 新增 `/batch` 端点，支持批量导入功能
- **进度管理**: 实现导入进度跟踪机制

### 2. 服务层解耦设计
- 创建 `BatchImportService` 类，独立处理批量导入逻辑
- 重用现有的 `ArtifactCreate` 模型和 `vector_sync_service`
- 实现导入进度跟踪和取消功能

### 3. 数据流设计
- 前端提交JSON数据 → API验证 → 解析为资料对象列表 → 批量处理 → 逐个创建资料并同步向量

现在让我制定详细的实施计划：


        
            
toolName: todo_write
            
status: success
          
Todos updated: 4 items
          
# 批量导入功能详细实施计划

## 1. 前端实现部分

### 1.1 资料管理页面修改
- 在"新建资料"按钮右侧添加"批量新增"按钮
- 创建批量导入对话框组件，包含：
  - JSON数据输入区域（文本域）
  - 开始导入按钮
  - 取消按钮
  - 进度条窗口（居中显示）

### 1.2 前端API调用
- 添加 `batchImportArtifacts` API方法到 `artifactApi`
- 实现进度轮询机制，实时更新进度条
- 添加取消导入功能

## 2. 后端实现部分

### 2.1 新增批量导入服务类
创建 `app/services/batch_import.py`：
- `BatchImportService` 类，处理批量导入逻辑
- JSON数据验证和解析
- 批量导入进度管理
- 支持取消操作

### 2.2 API端点扩展
在 `app/api/routers/artifacts.py` 中添加：
- `POST /api/v1/artifacts/batch` 端点
- JSON数据验证
- 进度查询端点
- 取消导入端点

### 2.3 进度管理
- 实现内存中的进度跟踪（使用字典存储任务状态）
- 提供进度查询API
- 支持任务取消

## 3. 实施步骤

### 第一阶段：后端实现
1. 创建 `BatchImportService` 类
2. 实现JSON解析和验证功能
3. 添加批量导入API端点
4. 实现进度跟踪机制

### 第二阶段：前端实现
1. 修改 `DataManager.vue` 添加批量新增按钮
2. 创建批量导入对话框组件
3. 实现API调用和进度显示
4. 添加取消功能

### 第三阶段：集成测试
1. 测试批量导入功能
2. 验证向量同步是否正确
3. 测试进度显示准确性
4. 测试取消功能有效性

## 4. JSON数据格式规范
```json
[
  {
    "title": "资料标题1",
    "content": "资料内容1",
    "category": "可选分类",
    "tags": "可选标签",
    "metadata": "可选元数据"
  },
  {
    "title": "资料标题2",
    "content": "资料内容2",
    "category": "可选分类",
    "tags": "可选标签",
    "metadata": "可选元数据"
  }
]
```

## 5. 技术要点
- 重用现有的资料创建和向量同步逻辑
- 使用异步处理避免长时间阻塞
- 实现优雅的错误处理和回滚机制
- 确保导入过程中系统的稳定性

这个实施计划将确保批量导入功能与现有系统良好集成，同时保持代码的解耦和可扩展性。